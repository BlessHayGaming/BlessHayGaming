{"hash":"d78917af8e10e3607f1017899608e144fac9a825","data":{"learnPost":{"id":"9fae680d6bb530df47a9307c08bfb852","title":"Multiple Keys for the Same Action","content":"<h2 id=\"problem\"><a href=\"#problem\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Problem</h2>\n<p>Oftentimes we want to be able to check multiple optional keys to perform an action. This might be to control a character both with WASD and with the arrow keys, or maybe to allow pausing on both the P key and the Pause key. I see a lot of people handling it like this:</p>\n<pre><code class=\"language-gml\">if (keyboard_check(vk_left) || keyboard_check(ord(\"A\"))) {\n    // Do something\n}\n</code></pre>\n<p>This is of course fine in many cases, but it can turn into some very long conditionals sometimes. Also, if we want to change the controls at some point (or want to allow the player to do so), it becomes quite an inconvenience. </p>\n<h2 id=\"solution\"><a href=\"#solution\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Solution</h2>\n<p>In GameMaker:Studio 2 you can define arrays like this:</p>\n<pre><code class=\"language-gml\">var _array = [\"index0\", \"index2\", \"etc.\"];\n</code></pre>\n<p>It is an easy way to pack multiple values into a variable. This does of course not help us directly, as <code>keyboard_check();</code> does not accept arrays as their argument, but what if we make our own script? A <code>keyboard_check_ext();</code> script? This would allow us to do something like this instead:</p>\n<pre><code class=\"language-gml\">var _left = [vk_left, ord(\"A\")];\nif (keyboard_check_ext(_left)) {\n    // Do something\n}\n\n// OR\n\nif (keyboard_check_ext([vk_left, ord(\"A\")])) {\n    // Do something\n}\n</code></pre>\n<p>Would that not be nice? We can even use a global or instance level variable to hold the mapped keys, changing them whenever we want to. But how would such script look?</p>\n<p>First and foremost, we want to be able to use the script with singular input as well, so we start off the script by checking if our argument is an array, and if it is not, then we simple do a regular <code>keyboard_check();</code>.</p>\n<pre><code class=\"language-gml\">var _array = argument0;\nif (!is_array(_array)) {\n    return keyboard_check(_array);\n}\n</code></pre>\n<p>This also allows us to do a Ctrl + Shift + F in our project, and replace all uses of <code>keyboard_check();</code> with our new script, without anything breaking.</p>\n<p>Next we get the length of the array and loop though it. For each element in the array we do a <code>keyboard_check();</code>, and if it returns true, then the loop ends there due to our <code>return</code>. After the loop we make sure to return 0, to let the user know that none of the keys are being pressed. A full script would look something like this:</p>\n<pre><code class=\"language-gml\">/// keyboard_check_ext(array_with_keys);\n/// @desc   Is one of multiple keys held down?\n/// @arg    array_with_keys\nvar _array = argument0;\nif (!is_array(_array)) {\n    return keyboard_check(_array);\n}\n\nvar _length = array_length_1d(_array);\nfor(var i=0; i&#x3C;_length; i++){\n    if (keyboard_check(_array[i])) {\n        return 1;\n    }\n}\nreturn 0;\n</code></pre>\n<p>Of course the exact same thing can be used for <code>keyboard_check_pressed();</code>, <code>keyboard_check_released();</code>, <code>keyboard_check_direct();</code>, <code>mouse_check_button_pressed();</code>, etc., simply by replacing the function used in the script.</p>\n<p>I hope this script and tutorial helped you making even more awesome games, and please share it, if you know someone who could learn something from it.</p>\n<p>Kind regards,<br>\nSimon</p>\n"}},"context":{}}